"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _enums = require("../enums");
const ReadLap = reader => {
  const lap = {
    LaptimeMS: reader.ReadInt32(),
    CarIndex: reader.ReadUInt16(),
    DriverIndex: reader.ReadUInt16(),
    Splits: [],
    Type: 0,
    IsInvalid: false,
    IsValidForBest: false
  };
  const splitCount = reader.ReadBytes(1).readUInt8(0);
  for (let i = 0; i < splitCount; i++) lap.Splits.push(reader.ReadInt32());
  lap.IsInvalid = reader.ReadBytes(1).readUInt8(0) > 0;
  lap.IsValidForBest = reader.ReadBytes(1).readUInt8(0) > 0;
  const isOutlap = reader.ReadBytes(1).readUInt8(0) > 0;
  const isInlap = reader.ReadBytes(1).readUInt8(0) > 0;
  if (isOutlap) lap.Type = 1;else if (isInlap) lap.Type = 3;else lap.Type = 2;
  lap.Type = new _enums.LapType()[lap.Type.toString()];
  while (lap.Splits.length < 3) lap.Splits.push(null);
  return lap;
};
var _default = exports.default = ReadLap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZW51bXMiLCJyZXF1aXJlIiwiUmVhZExhcCIsInJlYWRlciIsImxhcCIsIkxhcHRpbWVNUyIsIlJlYWRJbnQzMiIsIkNhckluZGV4IiwiUmVhZFVJbnQxNiIsIkRyaXZlckluZGV4IiwiU3BsaXRzIiwiVHlwZSIsIklzSW52YWxpZCIsIklzVmFsaWRGb3JCZXN0Iiwic3BsaXRDb3VudCIsIlJlYWRCeXRlcyIsInJlYWRVSW50OCIsImkiLCJwdXNoIiwiaXNPdXRsYXAiLCJpc0lubGFwIiwiTGFwVHlwZSIsInRvU3RyaW5nIiwibGVuZ3RoIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvUmVhZExhcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMYXBEYXRhIH0gZnJvbSBcIkAvdHlwZXNcIjtcclxuaW1wb3J0IHsgTGFwVHlwZSB9IGZyb20gXCIuLi9lbnVtc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMYXAge1xyXG4gIExhcHRpbWVNUzogbnVtYmVyO1xyXG4gIENhckluZGV4OiBudW1iZXI7XHJcbiAgRHJpdmVySW5kZXg6IG51bWJlcjtcclxuICBTcGxpdHM6IGFueVtdO1xyXG4gIFR5cGU6IG51bWJlcjtcclxuICBpc0ludmFsaWQ6IGJvb2xlYW47XHJcbiAgaXNWYWxpZEZvckJlc3Q6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IFJlYWRMYXAgPSAocmVhZGVyKSA9PiB7XHJcbiAgY29uc3QgbGFwOiBQYXJ0aWFsPExhcERhdGE+ID0ge1xyXG4gICAgTGFwdGltZU1TOiByZWFkZXIuUmVhZEludDMyKCksXHJcbiAgICBDYXJJbmRleDogcmVhZGVyLlJlYWRVSW50MTYoKSxcclxuICAgIERyaXZlckluZGV4OiByZWFkZXIuUmVhZFVJbnQxNigpLFxyXG4gICAgU3BsaXRzOiBbXSxcclxuICAgIFR5cGU6IDAsXHJcbiAgICBJc0ludmFsaWQ6IGZhbHNlLFxyXG4gICAgSXNWYWxpZEZvckJlc3Q6IGZhbHNlLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNwbGl0Q291bnQgPSByZWFkZXIuUmVhZEJ5dGVzKDEpLnJlYWRVSW50OCgwKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0Q291bnQ7IGkrKykgbGFwLlNwbGl0cy5wdXNoKHJlYWRlci5SZWFkSW50MzIoKSk7XHJcblxyXG4gIGxhcC5Jc0ludmFsaWQgPSByZWFkZXIuUmVhZEJ5dGVzKDEpLnJlYWRVSW50OCgwKSA+IDA7XHJcbiAgbGFwLklzVmFsaWRGb3JCZXN0ID0gcmVhZGVyLlJlYWRCeXRlcygxKS5yZWFkVUludDgoMCkgPiAwO1xyXG5cclxuICBjb25zdCBpc091dGxhcCA9IHJlYWRlci5SZWFkQnl0ZXMoMSkucmVhZFVJbnQ4KDApID4gMDtcclxuICBjb25zdCBpc0lubGFwID0gcmVhZGVyLlJlYWRCeXRlcygxKS5yZWFkVUludDgoMCkgPiAwO1xyXG5cclxuICBpZiAoaXNPdXRsYXApIGxhcC5UeXBlID0gMTtcclxuICBlbHNlIGlmIChpc0lubGFwKSBsYXAuVHlwZSA9IDM7XHJcbiAgZWxzZSBsYXAuVHlwZSA9IDI7XHJcblxyXG4gIGxhcC5UeXBlID0gbmV3IExhcFR5cGUoKVtsYXAuVHlwZS50b1N0cmluZygpXTtcclxuXHJcbiAgd2hpbGUgKGxhcC5TcGxpdHMubGVuZ3RoIDwgMykgbGFwLlNwbGl0cy5wdXNoKG51bGwpO1xyXG5cclxuICByZXR1cm4gbGFwIGFzIExhcERhdGE7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWFkTGFwO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQVlBLE1BQU1DLE9BQU8sR0FBSUMsTUFBTSxJQUFLO0VBQzFCLE1BQU1DLEdBQXFCLEdBQUc7SUFDNUJDLFNBQVMsRUFBRUYsTUFBTSxDQUFDRyxTQUFTLENBQUMsQ0FBQztJQUM3QkMsUUFBUSxFQUFFSixNQUFNLENBQUNLLFVBQVUsQ0FBQyxDQUFDO0lBQzdCQyxXQUFXLEVBQUVOLE1BQU0sQ0FBQ0ssVUFBVSxDQUFDLENBQUM7SUFDaENFLE1BQU0sRUFBRSxFQUFFO0lBQ1ZDLElBQUksRUFBRSxDQUFDO0lBQ1BDLFNBQVMsRUFBRSxLQUFLO0lBQ2hCQyxjQUFjLEVBQUU7RUFDbEIsQ0FBQztFQUVELE1BQU1DLFVBQVUsR0FBR1gsTUFBTSxDQUFDWSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxDQUFDLENBQUM7RUFDbkQsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILFVBQVUsRUFBRUcsQ0FBQyxFQUFFLEVBQUViLEdBQUcsQ0FBQ00sTUFBTSxDQUFDUSxJQUFJLENBQUNmLE1BQU0sQ0FBQ0csU0FBUyxDQUFDLENBQUMsQ0FBQztFQUV4RUYsR0FBRyxDQUFDUSxTQUFTLEdBQUdULE1BQU0sQ0FBQ1ksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUNwRFosR0FBRyxDQUFDUyxjQUFjLEdBQUdWLE1BQU0sQ0FBQ1ksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUV6RCxNQUFNRyxRQUFRLEdBQUdoQixNQUFNLENBQUNZLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7RUFDckQsTUFBTUksT0FBTyxHQUFHakIsTUFBTSxDQUFDWSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0VBRXBELElBQUlHLFFBQVEsRUFBRWYsR0FBRyxDQUFDTyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEtBQ3RCLElBQUlTLE9BQU8sRUFBRWhCLEdBQUcsQ0FBQ08sSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUMxQlAsR0FBRyxDQUFDTyxJQUFJLEdBQUcsQ0FBQztFQUVqQlAsR0FBRyxDQUFDTyxJQUFJLEdBQUcsSUFBSVUsY0FBTyxDQUFDLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ08sSUFBSSxDQUFDVyxRQUFRLENBQUMsQ0FBQyxDQUFDO0VBRTdDLE9BQU9sQixHQUFHLENBQUNNLE1BQU0sQ0FBQ2EsTUFBTSxHQUFHLENBQUMsRUFBRW5CLEdBQUcsQ0FBQ00sTUFBTSxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDO0VBRW5ELE9BQU9kLEdBQUc7QUFDWixDQUFDO0FBQUMsSUFBQW9CLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWF4QixPQUFPIiwiaWdub3JlTGlzdCI6W119